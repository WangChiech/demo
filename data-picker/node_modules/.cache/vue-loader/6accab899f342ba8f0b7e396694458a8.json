{"remainingRequest":"C:\\Users\\wangjie417\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\demo\\data-picker\\date-picker.vue?vue&type=style&index=0&lang=stylus&","dependencies":[{"path":"D:\\demo\\data-picker\\date-picker.vue","mtime":1582703447751},{"path":"C:\\Users\\wangjie417\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wangjie417\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\wangjie417\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\demo\\data-picker\\node_modules\\stylus-loader\\index.js","mtime":1519606876000},{"path":"C:\\Users\\wangjie417\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wangjie417\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoucGFubmVsIA0KICAgIHdpZHRoIDMyKjdweA0KICAgIHBvc2l0aW9uIGFic29sdXRlDQogICAgYmFja2dyb3VuZCAjZmZmDQogICAgYm94LXNoYWRvdyAycHggMnB4IDJweCBwaW5rLCAtMnB4IC0ycHggLTJweCBwaW5rDQogICAgLnBhbm5lbC1uYXYNCiAgICAgICAgZGlzcGxheSBmbGV4DQogICAgICAgIGp1c3RpZnktY29udGVudCBzcGFjZS1hcm91bmQNCiAgICAgICAgaGVpZ2h0IDMwcHgNCiAgICAgICAgc3BhbiANCiAgICAgICAgICAgIGN1cnNvciBwb2ludGVyDQogICAgICAgICAgICB1c2VyLXNlbGVjdCBub25lDQogICAgLnBhbm5lbC1jb250ZW50DQogICAgICAgIC5jZWxsDQogICAgICAgICAgICBkaXNwbGF5IGlubGluZS1mbGV4DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQgY2VudGVyDQogICAgICAgICAgICBhbGlnbi1pdGVtcyBjZW50ZXINCiAgICAgICAgICAgIHdpZHRoIDMycHgNCiAgICAgICAgICAgIGhlaWdodCAzMnB4DQogICAgICAgICAgICBmb250LXdlaWdodCBib2xkDQogICAgICAgIC5jZWxsLWRheXM6aG92ZXIsIC5pc1NlbGVjdA0KICAgICAgICAgICAgYm9yZGVyIDFweCBzb2xpZCBwaW5rDQogICAgICAgICAgICBib3gtc2l6aW5nIGJvcmRlci1ib3gNCiAgICAucGFubmVsLWZvb3Rlcg0KICAgICAgICBoZWlnaHQgMzBweA0KICAgICAgICB0ZXh0LWFsaWduIGNlbnRlcg0KICAgIC5ub3RDdXJyZW50TW9udGgNCiAgICAgICAgY29sb3IgZ3JheQ0KICAgIC50b2RheQ0KICAgICAgICBiYWNrZ3JvdW5kIHJlZA0KICAgICAgICBjb2xvciAjZmZmDQogICAgICAgIGJvcmRlci1yYWRpdXMgNHB4DQo="},{"version":3,"sources":["date-picker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"date-picker.vue","sourceRoot":".","sourcesContent":["<template>\r\n    <div v-click-outside>\r\n        <input type=\"text\" :value=\"formatDate\">\r\n        <div class=\"pannel\" v-if=\"isVisible\">\r\n            <div class=\"pannel-nav\">\r\n                <span>&lt;</span>\r\n                <span @click=\"preMonth\">&lt;&lt;</span>\r\n                <span>{{time.year}}年</span>\r\n                <span>{{time.month+1}}月</span>\r\n                <span @click=\"nextMonth\">&gt;&gt;</span>\r\n                <span>&gt;</span>\r\n            </div>\r\n            <div class=\"pannel-content\">\r\n                <div class=\"days\">\r\n                    <!-- 直接列出一个 6*7 列表 99 乘法表-->\r\n                    <span \r\n                        class=\"cell\"\r\n                        v-for=\"j in 7\" \r\n                        :key=\"j + '_'\"\r\n                    >\r\n                        {{weekDays[j-1]}}\r\n                    </span>\r\n                    <div v-for=\"i in 6\" :key=\"i\">\r\n                        <!-- 判断是不是当月，不是当月就变灰 -->\r\n                        <span \r\n                            class=\"cell  cell-days\"\r\n                            @click=\"chooseDate(visibleDays[(i-1)*7+(j-1)])\"\r\n                            :class=\"[\r\n                            {notCurrentMonth:!isCurrentMonth(visibleDays[(i-1)*7+(j-1)])},\r\n                            {today: isTOday(visibleDays[(i-1)*7+(j-1)])},\r\n                            {isSelect: isSelect(visibleDays[(i-1)*7+(j-1)])}\r\n                            ]\"\r\n                            v-for=\"j in 7\" \r\n                            :key=\"j\"\r\n                        >\r\n                            {{visibleDays[(i-1)*7+(j-1)].getDate()}}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"pannel-footer\">\r\n                今天\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as utils from './util'\r\nexport default {\r\n    directives: {\r\n        clickOutside: { // 指令的生命周期\r\n            bind (el, bindings, vnode) {\r\n                // 把事件绑定给document上 看一下点击的是否是当前这个元素内部\r\n                let handler = (e) => {\r\n                    if(el.contains(e.target)) {\r\n                        // 判断一下是否当前面板已经显示出来了\r\n                        if(!vnode.context.isVisible) {\r\n                            vnode.context.focus()\r\n                        }\r\n                    } else{\r\n                        if(vnode.context.isVisible) {\r\n                            vnode.context.blur()\r\n                        } \r\n                    }\r\n                }\r\n                el.handler = handler\r\n                document.addEventListener('click', handler)\r\n            }\r\n        }\r\n    },\r\n    props: {\r\n        value: {\r\n            type: Date,\r\n            default: () => new Date /// 返回的默认值必须是一个函数类型 {} []\r\n        }\r\n    },\r\n    mounted () {\r\n        console.log(this.visibleDays)\r\n    },\r\n    computed : {\r\n        visibleDays () {\r\n            // 获取当前是周几\r\n            let { year, month } = utils.getYearMonthDay(utils.getDate(this.time.year, this.time.month, 1))\r\n            // 获取当前月的第一天\r\n            let currentFirstDay = utils.getDate(year, month, 1)\r\n            // 先生成一个当前 2020 2 26\r\n            // 获取当前是周几 把天数往前移几天\r\n            let week = currentFirstDay.getDay()\r\n            // 当前开始的天数\r\n            let startDay = currentFirstDay - week * 60 * 60 * 1000 * 24\r\n            // 循环42天\r\n            let arr = []\r\n            for (let i = 0; i < 42; i++) {\r\n                // 以此循环出42天\r\n                arr.push(new Date(startDay+i * 60 * 60 * 1000 * 24))\r\n            }\r\n            return arr\r\n\r\n        },\r\n        formatDate () {\r\n            let { year, month, day } = utils.getYearMonthDay(this.value)\r\n            return  `${year}-${month+1}-${day}`\r\n        }\r\n    },\r\n    data () {\r\n        let { year, month} = utils.getYearMonthDay(this.value) \r\n        return {\r\n            weekDays: ['日', '一', '二', '三', '四', '五', '六'],\r\n            time: { year, month },\r\n            isVisible: false\r\n        }\r\n    },\r\n    methods: {\r\n        focus () {\r\n            this.isVisible = true\r\n        },\r\n        blur () {\r\n            this.isVisible = false\r\n        },\r\n        // 是否是当月\r\n        isCurrentMonth (data) {\r\n            // 当前用户传入的值\r\n            let { year, month } = utils.getYearMonthDay(utils.getDate(this.time.year,this.time.month,1))\r\n            let { year:y, month:m } = utils.getYearMonthDay(data)\r\n            return year == y && month === m\r\n        },\r\n        // 是否是今天\r\n        isTOday (data) {\r\n            let { year, month, day } = utils.getYearMonthDay(new Date())\r\n            let { year:y, month:m, day:d } = utils.getYearMonthDay(data)\r\n            return year == y && month === m && day === d\r\n        },\r\n        chooseDate (data) {\r\n            this.time = utils.getYearMonthDay(data)\r\n            this.$emit('input',data)\r\n            this.blur() // 关闭弹层\r\n        },\r\n        isSelect (data) {\r\n            let { year, month, day } = utils.getYearMonthDay(this.value)\r\n            let { year:y, month:m, day:d } = utils.getYearMonthDay(data)\r\n            return year == y && month === m && day === d\r\n        },\r\n        preMonth () {\r\n            this.time.month--\r\n            let { year, month, day } = utils.getYearMonthDay()\r\n            // 获取当前年月的一个日期\r\n            let d = utils.getDate(this.time.year,this.time.month)\r\n            d.setMonth(d.getMonth()-1)\r\n            this.time = utils.getYearMonthDay(d)\r\n        },\r\n        nextMonth () {\r\n\r\n        }\r\n    }\r\n    \r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n.pannel \r\n    width 32*7px\r\n    position absolute\r\n    background #fff\r\n    box-shadow 2px 2px 2px pink, -2px -2px -2px pink\r\n    .pannel-nav\r\n        display flex\r\n        justify-content space-around\r\n        height 30px\r\n        span \r\n            cursor pointer\r\n            user-select none\r\n    .pannel-content\r\n        .cell\r\n            display inline-flex\r\n            justify-content center\r\n            align-items center\r\n            width 32px\r\n            height 32px\r\n            font-weight bold\r\n        .cell-days:hover, .isSelect\r\n            border 1px solid pink\r\n            box-sizing border-box\r\n    .pannel-footer\r\n        height 30px\r\n        text-align center\r\n    .notCurrentMonth\r\n        color gray\r\n    .today\r\n        background red\r\n        color #fff\r\n        border-radius 4px\r\n</style>"]}]}