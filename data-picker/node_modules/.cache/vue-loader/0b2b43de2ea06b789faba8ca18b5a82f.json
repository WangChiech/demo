{"remainingRequest":"C:\\Users\\wangjie417\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\demo\\data-picker\\date-picker.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\demo\\data-picker\\date-picker.vue","mtime":1582703447751},{"path":"C:\\Users\\wangjie417\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\wangjie417\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\wangjie417\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuL3V0aWwnDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGlyZWN0aXZlczogew0KICAgICAgICBjbGlja091dHNpZGU6IHsgLy8g5oyH5Luk55qE55Sf5ZG95ZGo5pyfDQogICAgICAgICAgICBiaW5kIChlbCwgYmluZGluZ3MsIHZub2RlKSB7DQogICAgICAgICAgICAgICAgLy8g5oqK5LqL5Lu257uR5a6a57uZZG9jdW1lbnTkuIog55yL5LiA5LiL54K55Ye755qE5piv5ZCm5piv5b2T5YmN6L+Z5Liq5YWD57Sg5YaF6YOoDQogICAgICAgICAgICAgICAgbGV0IGhhbmRsZXIgPSAoZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZihlbC5jb250YWlucyhlLnRhcmdldCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWIpOaWreS4gOS4i+aYr+WQpuW9k+WJjemdouadv+W3sue7j+aYvuekuuWHuuadpeS6hg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXZub2RlLmNvbnRleHQuaXNWaXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUuY29udGV4dC5mb2N1cygpDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZub2RlLmNvbnRleHQuaXNWaXNpYmxlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdm5vZGUuY29udGV4dC5ibHVyKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZWwuaGFuZGxlciA9IGhhbmRsZXINCiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KICAgIHByb3BzOiB7DQogICAgICAgIHZhbHVlOiB7DQogICAgICAgICAgICB0eXBlOiBEYXRlLA0KICAgICAgICAgICAgZGVmYXVsdDogKCkgPT4gbmV3IERhdGUgLy8vIOi/lOWbnueahOm7mOiupOWAvOW/hemhu+aYr+S4gOS4quWHveaVsOexu+WeiyB7fSBbXQ0KICAgICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkICgpIHsNCiAgICAgICAgY29uc29sZS5sb2codGhpcy52aXNpYmxlRGF5cykNCiAgICB9LA0KICAgIGNvbXB1dGVkIDogew0KICAgICAgICB2aXNpYmxlRGF5cyAoKSB7DQogICAgICAgICAgICAvLyDojrflj5blvZPliY3mmK/lkajlh6ANCiAgICAgICAgICAgIGxldCB7IHllYXIsIG1vbnRoIH0gPSB1dGlscy5nZXRZZWFyTW9udGhEYXkodXRpbHMuZ2V0RGF0ZSh0aGlzLnRpbWUueWVhciwgdGhpcy50aW1lLm1vbnRoLCAxKSkNCiAgICAgICAgICAgIC8vIOiOt+WPluW9k+WJjeaciOeahOesrOS4gOWkqQ0KICAgICAgICAgICAgbGV0IGN1cnJlbnRGaXJzdERheSA9IHV0aWxzLmdldERhdGUoeWVhciwgbW9udGgsIDEpDQogICAgICAgICAgICAvLyDlhYjnlJ/miJDkuIDkuKrlvZPliY0gMjAyMCAyIDI2DQogICAgICAgICAgICAvLyDojrflj5blvZPliY3mmK/lkajlh6Ag5oqK5aSp5pWw5b6A5YmN56e75Yeg5aSpDQogICAgICAgICAgICBsZXQgd2VlayA9IGN1cnJlbnRGaXJzdERheS5nZXREYXkoKQ0KICAgICAgICAgICAgLy8g5b2T5YmN5byA5aeL55qE5aSp5pWwDQogICAgICAgICAgICBsZXQgc3RhcnREYXkgPSBjdXJyZW50Rmlyc3REYXkgLSB3ZWVrICogNjAgKiA2MCAqIDEwMDAgKiAyNA0KICAgICAgICAgICAgLy8g5b6q546vNDLlpKkNCiAgICAgICAgICAgIGxldCBhcnIgPSBbXQ0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0MjsgaSsrKSB7DQogICAgICAgICAgICAgICAgLy8g5Lul5q2k5b6q546v5Ye6NDLlpKkNCiAgICAgICAgICAgICAgICBhcnIucHVzaChuZXcgRGF0ZShzdGFydERheStpICogNjAgKiA2MCAqIDEwMDAgKiAyNCkpDQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gYXJyDQoNCiAgICAgICAgfSwNCiAgICAgICAgZm9ybWF0RGF0ZSAoKSB7DQogICAgICAgICAgICBsZXQgeyB5ZWFyLCBtb250aCwgZGF5IH0gPSB1dGlscy5nZXRZZWFyTW9udGhEYXkodGhpcy52YWx1ZSkNCiAgICAgICAgICAgIHJldHVybiAgYCR7eWVhcn0tJHttb250aCsxfS0ke2RheX1gDQogICAgICAgIH0NCiAgICB9LA0KICAgIGRhdGEgKCkgew0KICAgICAgICBsZXQgeyB5ZWFyLCBtb250aH0gPSB1dGlscy5nZXRZZWFyTW9udGhEYXkodGhpcy52YWx1ZSkgDQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICB3ZWVrRGF5czogWyfml6UnLCAn5LiAJywgJ+S6jCcsICfkuIknLCAn5ZubJywgJ+S6lCcsICflha0nXSwNCiAgICAgICAgICAgIHRpbWU6IHsgeWVhciwgbW9udGggfSwNCiAgICAgICAgICAgIGlzVmlzaWJsZTogZmFsc2UNCiAgICAgICAgfQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBmb2N1cyAoKSB7DQogICAgICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWUNCiAgICAgICAgfSwNCiAgICAgICAgYmx1ciAoKSB7DQogICAgICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlDQogICAgICAgIH0sDQogICAgICAgIC8vIOaYr+WQpuaYr+W9k+aciA0KICAgICAgICBpc0N1cnJlbnRNb250aCAoZGF0YSkgew0KICAgICAgICAgICAgLy8g5b2T5YmN55So5oi35Lyg5YWl55qE5YC8DQogICAgICAgICAgICBsZXQgeyB5ZWFyLCBtb250aCB9ID0gdXRpbHMuZ2V0WWVhck1vbnRoRGF5KHV0aWxzLmdldERhdGUodGhpcy50aW1lLnllYXIsdGhpcy50aW1lLm1vbnRoLDEpKQ0KICAgICAgICAgICAgbGV0IHsgeWVhcjp5LCBtb250aDptIH0gPSB1dGlscy5nZXRZZWFyTW9udGhEYXkoZGF0YSkNCiAgICAgICAgICAgIHJldHVybiB5ZWFyID09IHkgJiYgbW9udGggPT09IG0NCiAgICAgICAgfSwNCiAgICAgICAgLy8g5piv5ZCm5piv5LuK5aSpDQogICAgICAgIGlzVE9kYXkgKGRhdGEpIHsNCiAgICAgICAgICAgIGxldCB7IHllYXIsIG1vbnRoLCBkYXkgfSA9IHV0aWxzLmdldFllYXJNb250aERheShuZXcgRGF0ZSgpKQ0KICAgICAgICAgICAgbGV0IHsgeWVhcjp5LCBtb250aDptLCBkYXk6ZCB9ID0gdXRpbHMuZ2V0WWVhck1vbnRoRGF5KGRhdGEpDQogICAgICAgICAgICByZXR1cm4geWVhciA9PSB5ICYmIG1vbnRoID09PSBtICYmIGRheSA9PT0gZA0KICAgICAgICB9LA0KICAgICAgICBjaG9vc2VEYXRlIChkYXRhKSB7DQogICAgICAgICAgICB0aGlzLnRpbWUgPSB1dGlscy5nZXRZZWFyTW9udGhEYXkoZGF0YSkNCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JyxkYXRhKQ0KICAgICAgICAgICAgdGhpcy5ibHVyKCkgLy8g5YWz6Zet5by55bGCDQogICAgICAgIH0sDQogICAgICAgIGlzU2VsZWN0IChkYXRhKSB7DQogICAgICAgICAgICBsZXQgeyB5ZWFyLCBtb250aCwgZGF5IH0gPSB1dGlscy5nZXRZZWFyTW9udGhEYXkodGhpcy52YWx1ZSkNCiAgICAgICAgICAgIGxldCB7IHllYXI6eSwgbW9udGg6bSwgZGF5OmQgfSA9IHV0aWxzLmdldFllYXJNb250aERheShkYXRhKQ0KICAgICAgICAgICAgcmV0dXJuIHllYXIgPT0geSAmJiBtb250aCA9PT0gbSAmJiBkYXkgPT09IGQNCiAgICAgICAgfSwNCiAgICAgICAgcHJlTW9udGggKCkgew0KICAgICAgICAgICAgdGhpcy50aW1lLm1vbnRoLS0NCiAgICAgICAgICAgIGxldCB7IHllYXIsIG1vbnRoLCBkYXkgfSA9IHV0aWxzLmdldFllYXJNb250aERheSgpDQogICAgICAgICAgICAvLyDojrflj5blvZPliY3lubTmnIjnmoTkuIDkuKrml6XmnJ8NCiAgICAgICAgICAgIGxldCBkID0gdXRpbHMuZ2V0RGF0ZSh0aGlzLnRpbWUueWVhcix0aGlzLnRpbWUubW9udGgpDQogICAgICAgICAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKS0xKQ0KICAgICAgICAgICAgdGhpcy50aW1lID0gdXRpbHMuZ2V0WWVhck1vbnRoRGF5KGQpDQogICAgICAgIH0sDQogICAgICAgIG5leHRNb250aCAoKSB7DQoNCiAgICAgICAgfQ0KICAgIH0NCiAgICANCn0NCg=="},{"version":3,"sources":["date-picker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","file":"date-picker.vue","sourceRoot":".","sourcesContent":["<template>\r\n    <div v-click-outside>\r\n        <input type=\"text\" :value=\"formatDate\">\r\n        <div class=\"pannel\" v-if=\"isVisible\">\r\n            <div class=\"pannel-nav\">\r\n                <span>&lt;</span>\r\n                <span @click=\"preMonth\">&lt;&lt;</span>\r\n                <span>{{time.year}}年</span>\r\n                <span>{{time.month+1}}月</span>\r\n                <span @click=\"nextMonth\">&gt;&gt;</span>\r\n                <span>&gt;</span>\r\n            </div>\r\n            <div class=\"pannel-content\">\r\n                <div class=\"days\">\r\n                    <!-- 直接列出一个 6*7 列表 99 乘法表-->\r\n                    <span \r\n                        class=\"cell\"\r\n                        v-for=\"j in 7\" \r\n                        :key=\"j + '_'\"\r\n                    >\r\n                        {{weekDays[j-1]}}\r\n                    </span>\r\n                    <div v-for=\"i in 6\" :key=\"i\">\r\n                        <!-- 判断是不是当月，不是当月就变灰 -->\r\n                        <span \r\n                            class=\"cell  cell-days\"\r\n                            @click=\"chooseDate(visibleDays[(i-1)*7+(j-1)])\"\r\n                            :class=\"[\r\n                            {notCurrentMonth:!isCurrentMonth(visibleDays[(i-1)*7+(j-1)])},\r\n                            {today: isTOday(visibleDays[(i-1)*7+(j-1)])},\r\n                            {isSelect: isSelect(visibleDays[(i-1)*7+(j-1)])}\r\n                            ]\"\r\n                            v-for=\"j in 7\" \r\n                            :key=\"j\"\r\n                        >\r\n                            {{visibleDays[(i-1)*7+(j-1)].getDate()}}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"pannel-footer\">\r\n                今天\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as utils from './util'\r\nexport default {\r\n    directives: {\r\n        clickOutside: { // 指令的生命周期\r\n            bind (el, bindings, vnode) {\r\n                // 把事件绑定给document上 看一下点击的是否是当前这个元素内部\r\n                let handler = (e) => {\r\n                    if(el.contains(e.target)) {\r\n                        // 判断一下是否当前面板已经显示出来了\r\n                        if(!vnode.context.isVisible) {\r\n                            vnode.context.focus()\r\n                        }\r\n                    } else{\r\n                        if(vnode.context.isVisible) {\r\n                            vnode.context.blur()\r\n                        } \r\n                    }\r\n                }\r\n                el.handler = handler\r\n                document.addEventListener('click', handler)\r\n            }\r\n        }\r\n    },\r\n    props: {\r\n        value: {\r\n            type: Date,\r\n            default: () => new Date /// 返回的默认值必须是一个函数类型 {} []\r\n        }\r\n    },\r\n    mounted () {\r\n        console.log(this.visibleDays)\r\n    },\r\n    computed : {\r\n        visibleDays () {\r\n            // 获取当前是周几\r\n            let { year, month } = utils.getYearMonthDay(utils.getDate(this.time.year, this.time.month, 1))\r\n            // 获取当前月的第一天\r\n            let currentFirstDay = utils.getDate(year, month, 1)\r\n            // 先生成一个当前 2020 2 26\r\n            // 获取当前是周几 把天数往前移几天\r\n            let week = currentFirstDay.getDay()\r\n            // 当前开始的天数\r\n            let startDay = currentFirstDay - week * 60 * 60 * 1000 * 24\r\n            // 循环42天\r\n            let arr = []\r\n            for (let i = 0; i < 42; i++) {\r\n                // 以此循环出42天\r\n                arr.push(new Date(startDay+i * 60 * 60 * 1000 * 24))\r\n            }\r\n            return arr\r\n\r\n        },\r\n        formatDate () {\r\n            let { year, month, day } = utils.getYearMonthDay(this.value)\r\n            return  `${year}-${month+1}-${day}`\r\n        }\r\n    },\r\n    data () {\r\n        let { year, month} = utils.getYearMonthDay(this.value) \r\n        return {\r\n            weekDays: ['日', '一', '二', '三', '四', '五', '六'],\r\n            time: { year, month },\r\n            isVisible: false\r\n        }\r\n    },\r\n    methods: {\r\n        focus () {\r\n            this.isVisible = true\r\n        },\r\n        blur () {\r\n            this.isVisible = false\r\n        },\r\n        // 是否是当月\r\n        isCurrentMonth (data) {\r\n            // 当前用户传入的值\r\n            let { year, month } = utils.getYearMonthDay(utils.getDate(this.time.year,this.time.month,1))\r\n            let { year:y, month:m } = utils.getYearMonthDay(data)\r\n            return year == y && month === m\r\n        },\r\n        // 是否是今天\r\n        isTOday (data) {\r\n            let { year, month, day } = utils.getYearMonthDay(new Date())\r\n            let { year:y, month:m, day:d } = utils.getYearMonthDay(data)\r\n            return year == y && month === m && day === d\r\n        },\r\n        chooseDate (data) {\r\n            this.time = utils.getYearMonthDay(data)\r\n            this.$emit('input',data)\r\n            this.blur() // 关闭弹层\r\n        },\r\n        isSelect (data) {\r\n            let { year, month, day } = utils.getYearMonthDay(this.value)\r\n            let { year:y, month:m, day:d } = utils.getYearMonthDay(data)\r\n            return year == y && month === m && day === d\r\n        },\r\n        preMonth () {\r\n            this.time.month--\r\n            let { year, month, day } = utils.getYearMonthDay()\r\n            // 获取当前年月的一个日期\r\n            let d = utils.getDate(this.time.year,this.time.month)\r\n            d.setMonth(d.getMonth()-1)\r\n            this.time = utils.getYearMonthDay(d)\r\n        },\r\n        nextMonth () {\r\n\r\n        }\r\n    }\r\n    \r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\">\r\n.pannel \r\n    width 32*7px\r\n    position absolute\r\n    background #fff\r\n    box-shadow 2px 2px 2px pink, -2px -2px -2px pink\r\n    .pannel-nav\r\n        display flex\r\n        justify-content space-around\r\n        height 30px\r\n        span \r\n            cursor pointer\r\n            user-select none\r\n    .pannel-content\r\n        .cell\r\n            display inline-flex\r\n            justify-content center\r\n            align-items center\r\n            width 32px\r\n            height 32px\r\n            font-weight bold\r\n        .cell-days:hover, .isSelect\r\n            border 1px solid pink\r\n            box-sizing border-box\r\n    .pannel-footer\r\n        height 30px\r\n        text-align center\r\n    .notCurrentMonth\r\n        color gray\r\n    .today\r\n        background red\r\n        color #fff\r\n        border-radius 4px\r\n</style>"]}]}